<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Clean Water Detector â€” Enhanced</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#eaf9ff; --accent:#4db8ff; --accent-dark:#045c9c; --text:#033e6b;
  --clean-blue:#3fb0ff; --dirty-red:#ff6b6b; --maybe-yellow:#f0c419;
  --fish-count:28; --caustics-opacity:0.18;
}
html,body{height:100%;margin:0;background:var(--bg);font-family:'Inter',sans-serif;color:var(--text);-webkit-font-smoothing:antialiased}
.container{max-width:980px;margin:32px auto;padding:0 20px;position:relative;z-index:6}
header{display:flex;align-items:center;gap:12px;justify-content:center;padding:28px 12px;background:rgba(255,255,255,0.92);border-radius:12px;box-shadow:0 6px 18px rgba(9,30,63,0.06);position:relative;z-index:6}
.logo{width:62px;height:62px;border-radius:14px;background:linear-gradient(135deg,var(--accent),#bfe9ff);display:flex;align-items:center;justify-content:center;font-size:28px;box-shadow:0 6px 14px rgba(0,0,0,0.06)}
.title{font-size:22px;font-weight:700;color:var(--accent-dark)}
nav{display:flex;justify-content:center;gap:26px;margin-top:14px}
nav a{color:var(--accent-dark);text-decoration:none;font-weight:600}
nav a:hover{text-decoration:underline}
section.card{background:#fff;border-radius:14px;padding:20px;margin-top:24px;box-shadow:0 8px 28px rgba(9,30,63,0.06)}
h2{color:var(--accent-dark);margin:0 0 10px 0}
.btn{background:var(--accent);color:white;border:none;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer;display:inline-flex;gap:10px;align-items:center}
.btn:active{transform:translateY(1px)}
#webcam-wrap{display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap}
#webcam-container{background:linear-gradient(180deg,#f8fdff,#ffffff);padding:12px;border-radius:10px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.6)}
canvas{border-radius:8px;display:block}
#label-container div{font-size:16px;margin:6px 0}
.gauge-wrap{width:220px;height:140px;padding:6px;display:flex;flex-direction:column;align-items:center;justify-content:center}
.gauge{width:190px;height:110px}
.gauge .label{font-weight:700;margin-top:6px}
.facts{width:280px;padding:12px;border-radius:10px;background:linear-gradient(180deg,#f8ffff,#ffffff);box-shadow:0 6px 18px rgba(9,30,63,0.04)}
.fact-text{font-size:14px;min-height:56px;display:flex;align-items:center;justify-content:center;text-align:center;padding:6px;transition:opacity .35s ease}
.droplet{position:fixed;bottom:-40px;background:linear-gradient(180deg,rgba(255,255,255,0.85),rgba(180,230,255,0.35));width:14px;height:20px;border-radius:50% 50% 60% 60%;filter:blur(.3px);opacity:.85;z-index:2;pointer-events:none}
.bg-viewport{position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:0;}
.caustics{position:absolute; inset:-10% -20% -10% -20%; z-index:0; mix-blend-mode:overlay;
  background-image:
    radial-gradient(circle at 20% 20%, rgba(255,255,255,0.12), transparent 12%),
    radial-gradient(circle at 80% 40%, rgba(255,255,255,0.08), transparent 10%),
    radial-gradient(circle at 60% 70%, rgba(255,255,255,0.06), transparent 12%);
  opacity:var(--caustics-opacity); transform:translateZ(0);
  animation:causticMove 18s linear infinite; filter: blur(10px) saturate(110%);
}
.bg-fish-layer{position:absolute; inset:0; z-index:0; pointer-events:none; overflow:hidden;}
.bg-bubble-layer{ position:absolute; inset:0; z-index:0; pointer-events:none; overflow:visible; }
.fish{position:absolute; top:0; left:0; width:120px; height:auto; transform-origin:center; will-change:transform, opacity; backface-visibility:hidden; filter:drop-shadow(0 6px 10px rgba(5,36,52,0.06)); opacity:.95;}
.fish svg{ width:100%; height:auto; display:block; transform-origin:center center; }
@keyframes swimLR{0%{transform:translateX(-18vw) translateY(var(--y-offset)) rotateY(0deg) scale(var(--scale));}50%{transform:translateX(52vw) translateY(calc(var(--y-offset)+var(--bob))) rotateY(0deg) scale(var(--scale));}100%{transform:translateX(122vw) translateY(var(--y-offset)) rotateY(0deg) scale(var(--scale));}}
@keyframes swimRL{0%{transform:translateX(122vw) translateY(var(--y-offset)) rotateY(180deg) scale(var(--scale));}50%{transform:translateX(52vw) translateY(calc(var(--y-offset)+var(--bob))) rotateY(180deg) scale(var(--scale));}100%{transform:translateX(-18vw) translateY(var(--y-offset)) rotateY(180deg) scale(var(--scale));}}
.fish.anim-lr{ animation: swimLR var(--duration)s linear var(--delay)s infinite; }
.fish.anim-rl{ animation: swimRL var(--duration)s linear var(--delay)s infinite; }
@media (max-width:880px){:root{ --fish-count:18; --caustics-opacity:0.12; } .caustics{ animation-duration:26s; }}
#ripple{position:fixed;width:140px;height:140px;border-radius:50%;pointer-events:none;background:radial-gradient(circle at 40% 30%, rgba(255,255,255,0.75), rgba(179,224,255,0.18));mix-blend-mode:screen;opacity:.68;transform:translate(-50%,-50%) scale(.85);transition:transform .12s linear;z-index:3}
#loading{position:fixed;inset:0;background:linear-gradient(180deg,rgba(255,255,255,0.95),rgba(235,249,255,0.9));display:flex;align-items:center;justify-content:center;z-index:50;transition:opacity .45s ease}
.loader-card{background:linear-gradient(180deg,#fff,#f8feff);padding:28px;border-radius:14px;box-shadow:0 18px 40px rgba(9,30,63,0.08);display:flex;gap:18px;align-items:center}
.loading-droplets{display:flex;gap:8px}
.loading-droplets div{width:14px;height:18px;background:linear-gradient(180deg,#bfe9ff,#79c7ff);border-radius:50% 50% 60% 60%;animation:loadJump 0.8s infinite ease-in-out}
.loading-droplets div:nth-child(2){animation-delay:.12s}
.loading-droplets div:nth-child(3){animation-delay:.22s}
@keyframes loadJump{0%{transform:translateY(0)}50%{transform:translateY(-14px)}100%{transform:translateY(0)}}
:focus{ outline:3px solid rgba(77,184,255,0.25); outline-offset:2px; }
</style>
</head>
<body>
  <div class="bg-viewport" aria-hidden="true">
    <div class="caustics" id="causticsLayer"></div>
    <div class="bg-fish-layer" id="fishLayer"></div>
    <div class="bg-bubble-layer" id="bubbleLayer"></div>
  </div>

  <div class="droplet" style="left:8%;animation:rise 8s linear infinite;"></div>
  <div class="droplet" style="left:18%;animation:rise 10s linear infinite;opacity:.9;"></div>
  <div class="droplet" style="left:36%;animation:rise 7s linear infinite;opacity:.85;"></div>
  <div class="droplet" style="left:58%;animation:rise 9s linear infinite;opacity:.8;"></div>
  <div class="droplet" style="left:76%;animation:rise 11s linear infinite;opacity:.9;"></div>

  <div id="ripple" aria-hidden="true"></div>

  <div id="loading" role="status" aria-live="polite">
    <div class="loader-card">
      <div>
        <div style="font-weight:700;color:var(--accent-dark);margin-bottom:8px">Preparing the water detector</div>
        <div style="font-size:13px;color:#345;opacity:.9">Loading model and camera â€” please allow camera access.</div>
      </div>
      <div style="width:22px"></div>
      <div class="loading-droplets" aria-hidden="true"><div></div><div></div><div></div></div>
    </div>
  </div>

  <div class="container" id="page-root">
    <header>
      <div class="logo">ðŸ’§</div>
      <div>
        <div class="title">Clean Water Detector</div>
        <div style="font-size:12px;color:#2b5d82;margin-top:4px">Real-time water cleanliness classification</div>
      </div>
